FILE(GLOB ic_INCLUDES ${CMAKE_CURRENT_SOURCE_DIR}/include/*.h)
FILE(GLOB ic_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/src/*.cpp ${CMAKE_CURRENT_SOURCE_DIR}/src/*.c)
SET(LIBVNCCLIENT_SOURCES
${CMAKE_CURRENT_SOURCE_DIR}/src/libvncclient/cursor.c
${CMAKE_CURRENT_SOURCE_DIR}/src/libvncclient/listen.c
${CMAKE_CURRENT_SOURCE_DIR}/src/libvncclient/rfbproto.c
${CMAKE_CURRENT_SOURCE_DIR}/src/libvncclient/sockets.c
${CMAKE_CURRENT_SOURCE_DIR}/src/libvncclient/vncviewer.c)


SET(QRC_FILE ${CMAKE_CURRENT_SOURCE_DIR}/italc_core.qrc)
QT4_WRAP_CPP(ic_MOC_out ${ic_INCLUDES})
QT4_ADD_RESOURCES(ic_RCC_out ${QRC_FILE})
QT4_TRANSLATIONS_FOR_QRC(${QRC_FILE} ${ic_SOURCES} ${ic_INCLUDES})

ADD_DEFINITIONS(-DBUILD_ICA -DBUILD_LIBRARY)
IF(ITALC_BUILD_WIN32)
	LINK_LIBRARIES(-lpsapi)
ENDIF(ITALC_BUILD_WIN32)

INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR} ${CMAKE_CURRENT_SOURCE_DIR}/include)
ADD_LIBRARY(italc_core MODULE ${ic_SOURCES} ${ic_INCLUDES} ${ic_MOC_out} ${ic_RCC_out} ${LIBVNCCLIENT_SOURCES})
	
IF(ITALC_BUILD_WIN32)
	SET_TARGET_PROPERTIES(italc_core PROPERTIES PREFIX "")
ENDIF(ITALC_BUILD_WIN32)
